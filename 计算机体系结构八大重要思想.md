# 计算机体系结构八大重要思想

## overview

为了不断提高计算机的性能与可靠性，架构师们在过去几十年之间采用了许多优秀的设计思想。时至今日的处理器，有些思想还很适合，有些或许就因为时代的发展而需要改进，不论如何，学习这些思想都会让我们对于整个计算机体系结构的设计有一个更高层次的认识。

## 面向摩尔定律的设计

摩尔定律指出：集成电路上的晶体管数每18-24月就会翻一倍。在摩尔定律还适用的年代，开发者们在进行一个大型项目的设计时，往往将硬件水准预测为项目结束时的技术水平，而非开始时，这样能起到提高性能的作用。

然而，随着技术复杂度与经济成本的不断上升，面向摩尔定律的设计变得越来越不可行，人们不再能单靠硬件的快速发展去提高性能，需要采取诸如并行等策略。

## 使用抽象简化设计

我认为，抽象是整个计算机世界中最为重要的思想，不论是应用层开发还是底层开发亦或是网络通信因为它能极大的简化一系列事物的设计，提高效率。

从计算机体系结构的角度来看，计算机由应用软件，系统软件和硬件构成，其中系统软件包括操作系统，编译器。当我们希望计算机能为人类做点什么，就需要通过软件去调用底层的硬件。硬件的调用实现本身很复杂，但使用了抽象设计后，我们只需要使用硬件和底层软件之间的接口，即可达到调用的目的。这一抽象层，也被称为 指令集体系结构，它包含了开发者编写机器语言所需要的全部信息。指令集和操作系统提供的接口，统称为 应用二进制接口（ABI）。

## 加速大概率事件

对那些大概率发生的事情进行性能优化，远比优化小概率发生的事情来得更合理。

## 通过并行提高性能

将一个任务拆分成多个任务，派发给多个处理器去处理，最终按顺序汇总，这就是并行思想。

并行也是有适用条件的，首先任务必须能够拆分成多个子任务去处理，其次如何拆分好任务也是一个关键问题。

## 通过流水线提高性能

当学校教学楼发生火灾时，在消防员到来之前，由学生们一个接一个排成长队伍，接力将水桶从水源处送至教学楼，要远比每个人来回奔跑运水来的快。

从计算机体系结构的角度来看，cpu就是由一堆负责不同功能的电路模板叠加起来的，其职责是：

读取指令→指令译码→执行指令→数据回写

这是一个可以分为多个子任务的任务，完全可以让cpu用流水线的方式去实现，使得cpu的某一模块在执行完子任务后，不必等到整个任务都结束再开始干活，而是可以直接干下一个任务的相应子任务。

## 通过预测提高性能

通过猜测的方式来提前工作，而不是等到确切知道才开始。

前提是，预测错误的修改代价不大，且预测的准确率较高。

## 存储器层次结构

不同的数据对于存储的要求是不一样的，通过对存储器进行分层，可以缓解这些相互矛盾的需求。

计算机体系结构中，最顶层的是cpu内部的存储器，速度最快，价格最贵，容量最小；

第二层为内存，速度变慢了，价格便宜了，容量也变大了；

第三层为磁盘，速度最慢，价格最便宜，容量最大。

前两层为易失性存储器，仅在加电时能存储数据，而磁盘为非易失性存储器，去电也可保存。

## 通过冗余提高可靠性

为了防止某些组件失效，增加一些冗余组件来提高整体的可靠性。量要把控好，防止冗余变为多余。